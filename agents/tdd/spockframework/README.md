# SpockFramework TDD Example

## Introduction to Spock Framework
Spock is a testing and specification framework for Java and Groovy applications. It stands out with its beautiful and highly expressive specification language, inspired by JUnit, RSpec, and others. It is compatible with most IDEs, build tools, and CI servers. For more details, visit the [Spock Framework Documentation](https://spockframework.org/spock/docs/2.3/index.html).

## Running the Example
To run the SpockFramework TDD example, execute the `example.sh` script located in `agents/tdd/spockframework/`. This script performs the following actions:
- Clones the target repository: `git clone git@github.com:davidparry/groovy-spock.git`
- Invokes the `tddspock` agent with the specification: `qodo tddspock --set spec="Implement the OddEvenCamp interface requirements from the javadoc for this interface" -y -s`

This sets up and runs the TDD process for implementing the `OddEvenCamp` interface using Spock.

## Agent Configuration (agent.toml)
The `agent.toml` file in `agents/tdd/spockframework/` configures the `tddspock` agent for executing Spock tests in a Groovy environment following TDD and BDD principles. Key instructions include:
- Identifying the project's build system (Gradle or Maven) by checking for specific files like `build.gradle` or `pom.xml`.
- Creating skeleton classes with stub methods to allow tests to compile.
- Writing comprehensive Spock specifications that extend `Specification`, using features like given-when-then blocks, data-driven tests with `where`, mocks, and exception handling.
- Ensuring tests cover basic functionality, exceptions, interactions, and adhere to SOLID principles.
- Running tests to verify failures (Red phase), with the expectation that implementation will follow to make them pass (Green phase).
- Providing templates and examples for test structure, feature methods, and build configurations.

This configuration guides the agent to produce failing tests first, enforcing TDD practices.

## TDD Example Explanation
This example demonstrates Test-Driven Development (TDD) using Spock Framework. In TDD, development cycles through Red-Green-Refactor phases:
- **Red**: Write failing tests.
- **Green**: Implement minimal code to pass the tests.
- **Refactor**: Improve code while keeping tests green.

Here, the agent creates a skeleton implementation and comprehensive tests for the `OddEvenCamp` interface, which checks if a number is even (return 1) or odd (return 0), throwing `NegativeNumberException` for zero or negative numbers. The tests are designed to fail initially since only stubs are present. This represents the Red phase, where 44 out of 75 tests fail as expected, covering even/odd checks, exceptions, edge cases, and design principles.

## Reference to TDD_SUMMARY.md
The [TDD_SUMMARY.md](./TDD_SUMMARY.md) file details the completion of the Red phase, including test results (75 tests, 44 failures), artifacts created (skeleton class, test suites), and calls out the next step: the Green phase. It provides a suggested implementation snippet for `OddEvenCampImpl.java` to make all tests pass, such as:
```java
@Override
public int check(int number) {
    if (number <= 0) {
        throw new NegativeNumberException("Number must be positive, but was: " + number);
    }
    return number % 2 == 0 ? 1 : 0;
}
```
This highlights how the agent prepares for the implementation step.

## Reference to TDD_PROCESS.md
The [TDD_PROCESS.md](./TDD_PROCESS.md) file provides a detailed explanation of the TDD process for this example. It covers requirements analysis, skeleton creation, comprehensive test writing (64 scenarios), test execution results (64 tests, 41 failures), and build integration. It explains TDD concepts like the Red phase (failing tests) and outlines the next Green phase. This document shows the agent's understanding of TDD by breaking down the process, utilizing Spock features (e.g., @Unroll, given-when-then), and ensuring thorough coverage, demonstrating a methodical approach to test-first development.

## Example Outputs and Next Steps
These files (TDD_SUMMARY.md and TDD_PROCESS.md) are example outputs generated by the tddspock agent, demonstrating that it has grasped the instructions for implementing TDD with Spock Framework. They show a clear understanding of creating failing tests first (Red phase) and prepare for the subsequent steps: implementing the code to make tests pass (Green phase) and refactoring while maintaining passing tests (Refactor phase).
